{% extends "base.html" %}
{% block title %}Cart | Pawradise{% endblock %}
{% block content %}
<section class="cart-section">
  <h2>üõí Your Shopping Cart</h2>

  {% if cart_items %}
  <div class="cart-summary">
    <p class="item-count">You have {{ cart_items|length }} item(s) in your cart</p>
  </div>

  <table class="cart-table">
    <thead>
      <tr>
        <th>Product</th>
        <th>Image</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Subtotal</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% set total = namespace(value=0) %}
      {% for item, product in cart_items %}
      <tr>
        <td class="product-name">{{ product.name }}</td>
        <td class="product-image">
          {% if product.image %}
          <img src="{{ url_for('static', filename=product.image) }}" alt="{{ product.name }}">
          {% else %}
          <img src="{{ url_for('static', filename='placeholder.jpg') }}" alt="{{ product.name }}">
          {% endif %}
        </td>
        <td class="price">‚Ç±{{ "%.2f"|format(product.price) }}</td>
        <td class="quantity">{{ item.quantity }}</td>
        <td class="subtotal">‚Ç±{{ "%.2f"|format(product.price * item.quantity) }}</td>
        <td class="actions">
          <a href="{{ url_for('remove_from_cart', cart_id=item.id) }}"
             class="remove-btn"
             onclick="return confirm('Remove this item from cart?')">
            Remove
          </a>
        </td>
      </tr>
      {% set total.value = total.value + (product.price * item.quantity) %}
      {% endfor %}
    </tbody>
    <tfoot>
      <tr class="total-row">
        <td colspan="4" class="total-label">Total:</td>
        <td class="total-amount">‚Ç±{{ "%.2f"|format(total.value) }}</td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <div class="cart-actions">
    <a href="{{ url_for('shop') }}" class="continue-shopping-btn">‚Üê Continue Shopping</a>
    <a href="{{ url_for('checkout') }}" class="checkout-btn">Proceed to Checkout ‚Üí</a>
  </div>
  {% else %}
  <div class="empty-cart">
    <div class="empty-cart-icon">üõí</div>
    <h3>Your cart is empty</h3>
    <p>Add some pawsome products to get started!</p>
    <a href="{{ url_for('shop') }}" class="shop-now-btn">Start Shopping</a>
  </div>
  {% endif %}
</section>
{% endblock %}